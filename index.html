<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Small Helpers and Tricks for Epidemics Analysis • epitrix</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Small Helpers and Tricks for Epidemics Analysis">
<meta property="og:description" content="A collection of small functions useful for epidemics analysis and infectious disease modelling. This includes computation of basic reproduction numbers from growth rates, generation of hashed labels to anonymise data, and fitting discretised Gamma distributions.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">epitrix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/epitrix.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/estimate_incubation.html">Example to estimate incubation period</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/epitrix/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level1">
<div class="page-header"><h1 id="welcome-to-the-epitrix-package">Welcome to the <em>epitrix</em> package!<a class="anchor" aria-label="anchor" href="#welcome-to-the-epitrix-package"></a>
</h1></div>
<p>This package implements small helper functions usefull in infectious disease modelling and epidemics analysis.</p>
<div class="section level2">
<h2 id="installing-the-package">Installing the package<a class="anchor" aria-label="anchor" href="#installing-the-package"></a>
</h2>
<p>To install the current stable, CRAN version of the package, type:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"epitrix"</span><span class="op">)</span></span></code></pre></div>
<p>To benefit from the latest features and bug fixes, install the development, <em>github</em> version of the package using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"reconhub/epitrix"</span><span class="op">)</span></span></code></pre></div>
<p>Note that this requires the package <em>devtools</em> installed.</p>
</div>
</div>
<div class="section level1">
<h1 id="what-does-it-do">What does it do?<a class="anchor" aria-label="anchor" href="#what-does-it-do"></a>
</h1>
<p>The main features of the package include:</p>
<ul>
<li><p><strong><code>gamma_shapescale2mucv</code></strong>: convert shape and scale of a Gamma distribution to mean and CV</p></li>
<li><p><strong><code>gamma_mucv2shapescale</code></strong>: convert mean and CV of a Gamma distribution to shape and scale</p></li>
<li><p><strong><code>gamma_log_likelihood</code></strong>: Gamma log-likelihood using mean and CV</p></li>
<li><p><strong><code>r2R0</code></strong>: convert growth rate into a reproduction number</p></li>
<li><p><strong><code>lm2R0_sample</code></strong>: generates a distribution of R0 from a log-incidence linear model</p></li>
<li><p><strong><code>fit_disc_gamma</code></strong>: fits a discretised Gamma distribution to data (typically useful for describing delays)</p></li>
<li><p><strong><code>clean_labels</code></strong>: generate portable labels by removing non-standard characters or replacing them with their closest alphanumeric matches, standardising separators, etc.</p></li>
<li><p><strong><code>hash_names</code></strong>: generate unique, anonymised, reproducible labels from various data fields (e.g. First name, Last name, Date of birth).</p></li>
<li><p><strong><code>emperical_incubation_dist()</code></strong> will estimate the empirical incubation distribution if given a data frame with dates of onset and a range of exposure dates.</p></li>
<li><p><strong><code><a href="reference/fit_gamma_incubation_dist.html">fit_gamma_incubation_dist()</a></code></strong> wraps <code><a href="reference/empirical_incubation_dist.html">empirical_incubation_dist()</a></code> and <code><a href="reference/fit_disc_gamma.html">fit_disc_gamma()</a></code> to fit a discretized gamma distribution to an empirical incubation distribution</p></li>
</ul>
</div>
<div class="section level1">
<h1 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
</h1>
<div class="section level2">
<h2 id="worked-examples">Worked examples<a class="anchor" aria-label="anchor" href="#worked-examples"></a>
</h2>
<div class="section level3">
<h3 id="fitting-a-gamma-distribution-to-delay-data">Fitting a gamma distribution to delay data<a class="anchor" aria-label="anchor" href="#fitting-a-gamma-distribution-to-delay-data"></a>
</h3>
<p>In this example, we simulate data which replicate the serial interval (SI), i.e. the delays between primary and secondary symptom onsets, in Ebola Virus Disease (EVD). We start by converting previously estimates of the mean and standard deviation of the SI (WHO Ebola Response Team (2014) NEJM 371:1481–1495) to the parameters of a Gamma distribution:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.repidemicsconsortium.org/epitrix" class="external-link">epitrix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mu</span> <span class="op">&lt;-</span> <span class="fl">15.3</span> <span class="co"># mean in days days</span></span>
<span><span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">9.3</span> <span class="co"># standard deviation in days</span></span>
<span><span class="va">cv</span> <span class="op">&lt;-</span> <span class="va">sigma</span><span class="op">/</span><span class="va">mu</span> <span class="co"># coefficient of variation</span></span>
<span><span class="va">cv</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.6078431</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">param</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gamma_tools.html">gamma_mucv2shapescale</a></span><span class="op">(</span><span class="va">mu</span>, <span class="va">cv</span><span class="op">)</span> <span class="co"># convertion to Gamma parameters</span></span>
<span><span class="va">param</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## $shape</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2.706556</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $scale</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5.652941</span></span></code></pre></div>
<p>The <em>shape</em> and <em>scale</em> are parameters of a Gamma distribution we can use to generate delays. However, delays are typically reported per days, which implies a discretisation (from continuous time to discrete numbers). We use the package <a href="https://github.com/reconhub/distcrete" class="external-link"><em>distcrete</em></a> to achieve this discretisation. It generates a list of functions, including one to simulate data (<code>$r</code>), which we use to simulate 500 delays:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">si</span> <span class="op">&lt;-</span> <span class="fu">distcrete</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/distcrete/man/distcrete.html" class="external-link">distcrete</a></span><span class="op">(</span><span class="st">"gamma"</span>, interval <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               shape <span class="op">=</span> <span class="va">param</span><span class="op">$</span><span class="va">shape</span>,</span>
<span>               scale <span class="op">=</span> <span class="va">param</span><span class="op">$</span><span class="va">scale</span>, w <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">si</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## A discrete distribution</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   name: gamma</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   parameters:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     shape: 2.70655567117586</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="do">##     scale: 5.65294117647059</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">si</span><span class="op">$</span><span class="fu">r</span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  8 10 15 28  7 27 32 17 16  4</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span>, col <span class="op">=</span> <span class="st">"grey"</span>, border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Days between primary and secondary onset"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Simulated serial intervals"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/si-1.png"></p>
<p><code>x</code> contains simulated data, for illustrative purpose. In practice, one would use real data from an ongoing outbreaks. Now we use <code>fit_disc_gamma</code> to estimate the parameters of a dicretised Gamma distribution from the data:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">si_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_disc_gamma.html">fit_disc_gamma</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">si_fit</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## $mu</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 15.21914</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $cv</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.5851581</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $sd</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 8.905604</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ll</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -1741.393</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $converged</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $distribution</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="do">## A discrete distribution</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="do">##   name: gamma</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   parameters:</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="do">##     shape: 2.92047557759351</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="do">##     scale: 5.21118646429829</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="converting-a-growth-rate-r-to-a-reproduction-number-r0">Converting a growth rate (r) to a reproduction number (R0)<a class="anchor" aria-label="anchor" href="#converting-a-growth-rate-r-to-a-reproduction-number-r0"></a>
</h3>
<p>The package <a href="https://github.com/reconhub/incidence" class="external-link"><em>incidence</em></a> can fit a log-linear model to incidence curves (function <code>fit</code>), which produces a growth rate (r). This growth rate can in turn be translated into a basic reproduction number (R0) using <code>r2R0</code>. We illustrate this using simulated Ebola data from the <a href="https://github.com/reconhub/outbreaks" class="external-link"><em>outbreaks</em></a> package, and using the serial interval from the previous example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.repidemicsconsortium.org/incidence/" class="external-link">incidence</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/incidence/reference/incidence.html" class="external-link">incidence</a></span><span class="op">(</span><span class="va">ebola_sim</span><span class="op">$</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_of_onset</span><span class="op">)</span></span>
<span><span class="va">i</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;incidence object&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [5888 cases from days 2014-04-07 to 2015-04-30]</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $counts: matrix with 389 rows and 1 columns</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $n: 5888 cases in total</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $dates: 389 dates marking the left-side of bins</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $interval: 1 day</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $timespan: 389 days</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $cumulative: FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/incidence/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">i</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">150</span><span class="op">]</span><span class="op">)</span> <span class="co"># fit on first 150 days</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in fit(i[1:150]): 22 dates with incidence of 0 ignored for fitting</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">i</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">200</span><span class="op">]</span>, fit <span class="op">=</span> <span class="va">f</span>, color <span class="op">=</span> <span class="st">"#9fc2fc"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/fit_i-1.png"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/r2R0.html">r2R0</a></span><span class="op">(</span><span class="va">f</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">r</span>, <span class="va">si</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.348624</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/r2R0.html">r2R0</a></span><span class="op">(</span><span class="va">f</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">r.conf</span>, <span class="va">si</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">##         2.5 %   97.5 %</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,] 1.314055 1.383674</span></span></code></pre></div>
<p>In addition, we can also use the function <code>lm2R0_sample</code> to generate samples of R0 values compatible with a model fit:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">R0_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/r2R0.html">lm2R0_sample</a></span><span class="op">(</span><span class="va">f</span><span class="op">$</span><span class="va">model</span>, <span class="va">si</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">R0_val</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.350970 1.347374 1.350076 1.358523 1.341549 1.341634</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">R0_val</span>, col <span class="op">=</span> <span class="st">"grey"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/sample_R0-1.png"></p>
</div>
<div class="section level3">
<h3 id="standardising-labels">Standardising labels<a class="anchor" aria-label="anchor" href="#standardising-labels"></a>
</h3>
<p>If you want to use labels that will work across different computers, independent of local encoding and operating systems, <code>clean_labels</code> will make your life easier. The function transforms character strings by replacing diacritic symbols with their closest alphanumeric matches, setting all characters to lower case, and replacing various separators with a single, consistent one.</p>
<p>For instance:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">" Thîs- is A   wêïrD LäBeL .."</span></span>
<span><span class="va">x</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] " Thîs- is A   wêïrD LäBeL .."</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/clean_labels.html">clean_labels</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "this_is_a_weird_label"</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date.of.ONSET "</span>,</span>
<span>               <span class="st">"/  date of hôspitalisation  /"</span>,</span>
<span>               <span class="st">"-DäTÈ--OF___DîSCHARGE-"</span>,</span>
<span>               <span class="st">"GEndèr/"</span>,</span>
<span>               <span class="st">"  Location. "</span><span class="op">)</span></span>
<span><span class="va">variables</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Date.of.ONSET "                "/  date of hôspitalisation  /"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] "-DäTÈ--OF___DîSCHARGE-"        "GEndèr/"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] "  Location. "</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/clean_labels.html">clean_labels</a></span><span class="op">(</span><span class="va">variables</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "date_of_onset"           "date_of_hospitalisation"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] "date_of_discharge"       "gender"</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] "location"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="anonymising-data">Anonymising data<a class="anchor" aria-label="anchor" href="#anonymising-data"></a>
</h3>
<p><code>hash_names</code> can be used to generate hashed labels from linelist data. Based on pre-defined fields, it will generate anonymous labels. This system has the following desirable features:</p>
<ul>
<li><p>given the same input, the output will always be the same, so this encoding system generates labels which can be used by different people and organisations</p></li>
<li><p>given different inputs, the output will always be different; even minor differences in input will result in entirely different outputs</p></li>
<li><p>given an output, it is very hard to infer the input (it requires hacking skills); if security is challenged, the hashing algorithm can be ‘salted’ to strengthen security</p></li>
</ul>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Jane"</span>, <span class="st">"Joe"</span>, <span class="st">"Raoul"</span>, <span class="st">"Raoul"</span><span class="op">)</span></span>
<span><span class="va">last_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Doe"</span>, <span class="st">"Smith"</span>, <span class="st">"Dupont"</span>, <span class="st">"Dupond"</span><span class="op">)</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">69</span>, <span class="fl">36</span>, <span class="fl">36</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## detailed output by default</span></span>
<span><span class="fu"><a href="reference/hash_names.html">hash_names</a></span><span class="op">(</span><span class="va">first_name</span>, <span class="va">last_name</span>, <span class="va">age</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">##             label hash_short</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     jane_doe_25     6485f2</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    joe_smith_69     ea1ccc</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 raoul_dupont_36     f60676</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 raoul_dupond_36     cd7104</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                                                               hash</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 6485f29654c5a9d55625cd6efeb96d569917e1c272790959ad3fa132c6d51648</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 ea1cccce320aa45a0d694ea12c30ff6b4b52c67f69d58b23dad5441ea17c5807</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 f60676d1c11ae5badc0e5ec4dfde06eaba817a78f3d54eb327a25df485ec1efd</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 cd7104e7e7009bfd988d5a4b46a930424908736065573e51a85d16575ed7c2a5</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## short labels for practical use</span></span>
<span><span class="fu"><a href="reference/hash_names.html">hash_names</a></span><span class="op">(</span><span class="va">first_name</span>, <span class="va">last_name</span>, <span class="va">age</span>,</span>
<span>           size <span class="op">=</span> <span class="fl">8</span>, full <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "6485f296" "ea1cccce" "f60676d1" "cd7104e7"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="estimate-incubation-periods">Estimate incubation periods<a class="anchor" aria-label="anchor" href="#estimate-incubation-periods"></a>
</h3>
<p>The function <code><a href="reference/empirical_incubation_dist.html">empirical_incubation_dist()</a></code> computes the discrete probability distribution by giving equal weight to each patient. Thus, in the case of <code>N</code> patients, the <code>n</code> possible exposure dates of a given patient get the overall weight <code>1/(n*N)</code>. The function returns a data frame with column <code>incubation_period</code> containing the different incubation periods with a time step of one day and their <code>relative_frequency</code>.</p>
<p>Load environment:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/linelist" class="external-link">linelist</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.repidemicsconsortium.org/epitrix" class="external-link">epitrix</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/distcrete" class="external-link">distcrete</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>Make a linelist object containing toy data with several possible exposure dates for each case:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu">messy_data</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">clean_data</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">15</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/distcrete/man/distcrete.html" class="external-link">distcrete</a></span><span class="op">(</span><span class="st">"gamma"</span>, <span class="fl">1</span>, shape <span class="op">=</span> <span class="fl">12</span>, rate <span class="op">=</span> <span class="fl">3</span>, w <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">mkexposures</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="va">i</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">x</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">FALSE</span>, prob <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="va">exposures</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ll</span><span class="op">$</span><span class="va">date_of_onset</span>, <span class="va">mkexposures</span><span class="op">)</span></span>
<span><span class="va">ll</span><span class="op">$</span><span class="va">dates_exposure</span> <span class="op">&lt;-</span> <span class="va">exposures</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">##        id date_of_onset  discharge gender epi_case_definition messy_dates</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  vetnhi    2018-01-08 2018-01-18 female            probable  1989-12-24</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  spmizq    2018-01-05 2018-01-15 female           suspected        &lt;NA&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  fjnwdf    2018-01-04 2018-01-14 female           confirmed  2001-12-01</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  epnekp    2018-01-05 2018-01-15   male           suspected  2018-10-17</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  imybnl    2018-01-10 2018-01-20 female           suspected  2018-10-19</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  xwetko    2018-01-11 2018-01-21   male           suspected        &lt;NA&gt;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7  cdywen    2018-01-09 2018-01-19   male           confirmed  2018-10-19</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8  yieymf    2018-01-11 2018-01-21   male           suspected  1989-12-24</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9  aqkxns    2018-01-07 2018-01-17 female           confirmed  2018-10-17</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 ajkijq    2018-01-06 2018-01-16   male            probable  2001-12-01</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 asvncx    2018-01-11 2018-01-21 female           suspected  1989-12-24</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 kmsghs    2018-01-03 2018-01-13   male          not_a_case  2018-10-18</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 uaoqyr    2018-01-02 2018-01-12 female            probable  1989-12-24</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 gkddqj    2018-01-02 2018-01-12   male           confirmed        &lt;NA&gt;</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 kyjfra    2018-01-08 2018-01-18 female            probable        &lt;NA&gt;</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 runith    2018-01-08 2018-01-18 female           confirmed        &lt;NA&gt;</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 ucumvt    2018-01-10 2018-01-20 female          not_a_case        &lt;NA&gt;</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 xhlhiw    2018-01-03 2018-01-13   male           confirmed  2001-12-01</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 19 ckkleg    2018-01-03 2018-01-13 female           suspected        &lt;NA&gt;</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 rvkehu    2018-01-11 2018-01-21 female           confirmed        &lt;NA&gt;</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="do">##          lat      lon                    dates_exposure</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  12.112116 48.44879                      17533, 17534</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  12.374859 49.02630 17534, 17531, 17533, 17532, 17530</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  11.793991 49.07498        17530, 17531, 17532, 17533</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  10.812131 48.45831               17531, 17533, 17532</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  14.429412 48.63159        17538, 17536, 17537, 17539</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  12.782375 47.41953               17536, 17539, 17538</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 7  10.112404 49.58419                      17536, 17535</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 8  14.612247 46.23601 17540, 17538, 17539, 17536, 17537</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 9   9.520330 46.11938 17535, 17536, 17534, 17532, 17533</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 12.197359 46.70828                      17534, 17535</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 12.424835 48.90967               17538, 17539, 17536</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 11.123185 46.89224 17530, 17531, 17529, 17532, 17528</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 13.575334 47.61588                      17530, 17531</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 14  9.989198 48.08273                             17530</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 16.038594 47.51612 17533, 17537, 17536, 17535, 17534</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 13.734819 45.91526               17536, 17537, 17535</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 16.399725 49.16759        17539, 17536, 17538, 17537</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 14.288394 47.92317        17530, 17532, 17531, 17528</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a><span class="do">## 19  9.624398 48.53042                      17531, 17529</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 14.295292 48.00491                             17539</span></span></code></pre></div>
<p>Empirical distribution:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">incubation_period_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/empirical_incubation_dist.html">empirical_incubation_dist</a></span><span class="op">(</span><span class="va">ll</span>, <span class="va">date_of_onset</span>, <span class="va">dates_exposure</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">incubation_period_dist</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 7 x 2</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   incubation_period relative_frequency</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="do">##               &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1                 0              0</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2                 1              0</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3                 2              0.167</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4                 3              0.342</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5                 4              0.192</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6                 5              0.179</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 7                 6              0.121</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">incubation_period_dist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">incubation_period</span>, <span class="va">relative_frequency</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/unnamed-chunk-4-1.png"></p>
<p>Fit discrete gamma:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_gamma_incubation_dist.html">fit_gamma_incubation_dist</a></span><span class="op">(</span><span class="va">ll</span>, <span class="va">date_of_onset</span>, <span class="va">dates_exposure</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## $mu</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4.201981</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $cv</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.2914004</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $sd</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.224459</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ll</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -1620.401</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $converged</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $distribution</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="do">## A discrete distribution</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="do">##   name: gamma</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   parameters:</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="do">##     shape: 11.7765912294898</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="do">##     scale: 0.356807952644933</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">distribution</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">incubation_period_dist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">incubation_period</span>, <span class="va">relative_frequency</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, col <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-markdown_github/unnamed-chunk-5-1.png"></p>
<p><strong>Note</strong> that if the possible exposure dates are consecutive for all patients then <code><a href="reference/empirical_incubation_dist.html">empirical_incubation_dist()</a></code> and <code><a href="reference/fit_gamma_incubation_dist.html">fit_gamma_incubation_dist()</a></code> can take date ranges as inputs instead of lists of individual exposure dates (see help for details).</p>
</div>
</div>
<div class="section level2">
<h2 id="vignettes">Vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h2>
<p>The <a href="http://www.repidemicsconsortium.org/epitrix/articles/epitrix.html" class="external-link">overview vignette</a> essentially replicates the content of this <code>README</code>. To request or contribute other vignettes, see the section “<em>getting help, contributing</em>”.</p>
<p>The <a href="http://www.repidemicsconsortium.org/epitrix/articles/estimate_incubation.html" class="external-link">estimate incubation vignette</a> contains worked examples for the <code>emperical_incubation_dist()</code> <code><a href="reference/fit_gamma_incubation_dist.html">fit_gamma_incubation_dist()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="websites">Websites<a class="anchor" aria-label="anchor" href="#websites"></a>
</h2>
<p>Click <a href="http://www.repidemicsconsortium.org/epitrix/" class="external-link">here</a> for the website dedicated to <em>epitrix</em>.</p>
</div>
<div class="section level2">
<h2 id="getting-help-contributing">Getting help, contributing<a class="anchor" aria-label="anchor" href="#getting-help-contributing"></a>
</h2>
<p>Bug reports and feature requests should be posted on <em>github</em> using the <a href="http://github.com/reconhub/epitrix/issues" class="external-link"><em>issue</em></a> system. All other questions should be posted on the <a href="http://www.repidemicsconsortium.org/forum/" class="external-link"><strong>RECON forum</strong></a>.</p>
<p>Contributions are welcome via <strong>pull requests</strong>.</p>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=epitrix" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/reconhub/epitrix/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/reconhub/epitrix/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing epitrix</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Thibaut Jombart <br><small class="roles"> Author, maintainer </small>  </li>
<li>Anne Cori <br><small class="roles"> Author </small>  </li>
<li>Flavio Finger <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://ci.appveyor.com/project/thibautjombart/epitrix/branch/master" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/0gb7evy0k4juox2b/branch/master?svg=true" alt="Build status"></a></li>
<li><a href="https://travis-ci.org/reconhub/epitrix" class="external-link"><img src="https://travis-ci.org/reconhub/epitrix.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/reconhub/epitrix?branch=master" class="external-link"><img src="https://codecov.io/github/reconhub/epitrix/coverage.svg?branch=master" alt="codecov.io"></a></li>
<li><a href="https://cran.r-project.org/package=epitrix" class="external-link"><img src="http://www.r-pkg.org/badges/version/epitrix" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=epitrix" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/epitrix" alt="CRAN Downloads"></a></li>
<li><a href="http://www.r-pkg.org/pkg/epitrix" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/epitrix" alt="Downloads from Rstudio mirror"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Thibaut Jombart, Anne Cori, Flavio Finger.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
